"use strict";(self.webpackChunkcreate_project_docs=self.webpackChunkcreate_project_docs||[]).push([[3046],{28453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>l});var i=s(96540);const r={},t=i.createContext(r);function c(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),i.createElement(t.Provider,{value:n},e.children)}},75076:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"api-specification/collab-agent-services","title":"Collab Agent Services","description":"Auto-generated TypeDoc for Collab Agent Services","source":"@site/docs/api-specification/collab-agent-services.md","sourceDirName":"api-specification","slug":"/api-specification/collab-agent-services","permalink":"/project-collabagent01/docs/api-specification/collab-agent-services","draft":false,"unlisted":false,"editUrl":"https://github.com/Capstone-Projects-2025-Fall/project-collabagent01/edit/main/documentation/docs/api-specification/collab-agent-services.md","tags":[],"version":"current","lastUpdatedBy":"Alphin Shajan","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"description":"Auto-generated TypeDoc for Collab Agent Services"},"sidebar":"docsSidebar","previous":{"title":"Collab Agent APIs","permalink":"/project-collabagent01/docs/api-specification/collab-agent-apis"},"next":{"title":"API 1 - Collab Agent","permalink":"/project-collabagent01/docs/api-specification/openapi-spec"}}');var r=s(74848),t=s(28453);const c={sidebar_position:2,description:"Auto-generated TypeDoc for Collab Agent Services"},l="Collab Agent Services",o={},d=[{value:"Auth Service",id:"auth-service",level:2},{value:"setAuthContext Function",id:"setauthcontext-function",level:3},{value:"getAuthContext Function",id:"getauthcontext-function",level:3},{value:"checkUserSignIn Function",id:"checkusersignin-function",level:3},{value:"signInWithGithub Function",id:"signinwithgithub-function",level:3},{value:"handleSignIn Function",id:"handlesignin-function",level:3},{value:"handleSignOut Function",id:"handlesignout-function",level:3},{value:"getCurrentUserId Function",id:"getcurrentuserid-function",level:3},{value:"Profile Service",id:"profile-service",level:2},{value:"getUserProfile Function",id:"getuserprofile-function",level:3},{value:"updateUserProfile Function",id:"updateuserprofile-function",level:3},{value:"Team Service",id:"team-service",level:2},{value:"createTeam Function",id:"createteam-function",level:3},{value:"joinTeam Function",id:"jointeam-function",level:3},{value:"getUserTeams Function",id:"getuserteams-function",level:3},{value:"getTeamMembers Function",id:"getteammembers-function",level:3},{value:"deleteTeam Function",id:"deleteteam-function",level:3},{value:"leaveTeam Function",id:"leaveteam-function",level:3},{value:"Project Detection Service",id:"project-detection-service",level:2},{value:"getCurrentProjectInfo Function",id:"getcurrentprojectinfo-function",level:3},{value:"validateCurrentProject Function",id:"validatecurrentproject-function",level:3},{value:"File Snapshot Service",id:"file-snapshot-service",level:2},{value:"addFileSnapshot Function",id:"addfilesnapshot-function",level:3},{value:"Jira Service",id:"jira-service",level:2},{value:"connectJira Function",id:"connectjira-function",level:3},{value:"fetchJiraIssues Function",id:"fetchjiraissues-function",level:3},{value:"Session Sync Service",id:"session-sync-service",level:2},{value:"startSessionSync Function",id:"startsessionsync-function",level:3},{value:"stopSessionSync Function",id:"stopsessionsync-function",level:3}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"collab-agent-services",children:"Collab Agent Services"})}),"\n",(0,r.jsx)(n.h2,{id:"auth-service",children:"Auth Service"}),"\n",(0,r.jsx)(n.h3,{id:"setauthcontext-function",children:"setAuthContext Function"}),"\n",(0,r.jsxs)(n.p,{children:["Defined in ",(0,r.jsx)(n.strong,{children:"services/auth-service.ts:16"})]}),"\n",(0,r.jsx)(n.p,{children:"Stores the current user's authentication context in VS Code's global state for persistence across sessions."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user: User | undefined"})," - The authenticated user object or undefined to clear auth context"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," ",(0,r.jsx)(n.code,{children:"Promise<{ error?: string }>"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Empty object on success, or object with error message"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Pre-conditions:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"globalContext must be initialized"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Post-conditions:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"User context is saved to global state and persists across VS Code sessions"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"getauthcontext-function",children:"getAuthContext Function"}),"\n",(0,r.jsxs)(n.p,{children:["Defined in ",(0,r.jsx)(n.strong,{children:"services/auth-service.ts:34"})]}),"\n",(0,r.jsx)(n.p,{children:"Retrieves the currently authenticated user from VS Code's global state."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," ",(0,r.jsx)(n.code,{children:"Promise<{ context?: User; error?: string }>"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Object containing user context or error message"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"checkusersignin-function",children:"checkUserSignIn Function"}),"\n",(0,r.jsxs)(n.p,{children:["Defined in ",(0,r.jsx)(n.strong,{children:"services/auth-service.ts:50"})]}),"\n",(0,r.jsx)(n.p,{children:"Validates user session on extension startup. Refreshes user data from Supabase and displays welcome notification if authenticated."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," ",(0,r.jsx)(n.code,{children:"Promise<void>"})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Post-conditions:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"User data is refreshed from backend"}),"\n",(0,r.jsx)(n.li,{children:"Welcome notification shown if user is authenticated"}),"\n",(0,r.jsx)(n.li,{children:"Auth notification shown if user is not signed in"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"signinwithgithub-function",children:"signInWithGithub Function"}),"\n",(0,r.jsxs)(n.p,{children:["Defined in ",(0,r.jsx)(n.strong,{children:"services/auth-service.ts:333"})]}),"\n",(0,r.jsx)(n.p,{children:"Initiates GitHub OAuth sign-in flow using Supabase authentication. Opens external browser for GitHub authorization."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," ",(0,r.jsx)(n.code,{children:"Promise<void>"})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Remarks:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Process:"})," Generates dynamic deep link callback URL based on extension ID, creates Supabase OAuth URL with GitHub provider, opens authorization URL in user's default browser"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Post-conditions:"})," User is redirected to GitHub OAuth consent screen; on success, auth callback triggers user session creation"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"await signInWithGithub();\n// User is redirected to GitHub OAuth consent page\n// After authorization, callback handler completes sign-in\n"})}),"\n",(0,r.jsx)(n.h3,{id:"handlesignin-function",children:"handleSignIn Function"}),"\n",(0,r.jsxs)(n.p,{children:["Defined in ",(0,r.jsx)(n.strong,{children:"services/auth-service.ts:148"})]}),"\n",(0,r.jsx)(n.p,{children:"Handles email/password sign-in flow with interactive VS Code input prompts."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," ",(0,r.jsx)(n.code,{children:"Promise<void>"})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Remarks:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Process:"})," Prompts user for email and password, calls authentication API, stores Supabase session for persistence, fetches and stores user profile data"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Post-conditions:"})," User is authenticated and session is stored; auth context is set with user data; ",(0,r.jsx)(n.code,{children:"collabAgent.authStateChanged"})," command is triggered"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"handlesignout-function",children:"handleSignOut Function"}),"\n",(0,r.jsxs)(n.p,{children:["Defined in ",(0,r.jsx)(n.strong,{children:"services/auth-service.ts:251"})]}),"\n",(0,r.jsx)(n.p,{children:"Signs out the current user, clearing all stored authentication data and tokens."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," ",(0,r.jsx)(n.code,{children:"Promise<void>"})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Remarks:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Process:"})," Validates user is currently authenticated, clears auth context from global state, clears GitHub access token if present"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Post-conditions:"})," User context is removed from global state; GitHub token is cleared; sign out notification displayed; UI refreshes to unauthenticated state"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"getcurrentuserid-function",children:"getCurrentUserId Function"}),"\n",(0,r.jsxs)(n.p,{children:["Defined in ",(0,r.jsx)(n.strong,{children:"services/auth-service.ts:367"})]}),"\n",(0,r.jsx)(n.p,{children:"Gets the current Supabase auth user ID from the active session."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," ",(0,r.jsx)(n.code,{children:"Promise<string | null>"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Supabase user ID or null if no active session"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Remarks:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Attempts to get session user ID, falls back to explicit user fetch if session not found"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"profile-service",children:"Profile Service"}),"\n",(0,r.jsx)(n.h3,{id:"getuserprofile-function",children:"getUserProfile Function"}),"\n",(0,r.jsxs)(n.p,{children:["Defined in ",(0,r.jsx)(n.strong,{children:"services/profile-service.ts"})]}),"\n",(0,r.jsx)(n.p,{children:"Retrieves user profile information for display in team views."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"userId: string"})," - Supabase auth user ID"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," ",(0,r.jsx)(n.code,{children:"Promise<{ profile?: UserProfile; error?: string }>"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"User profile data"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"updateuserprofile-function",children:"updateUserProfile Function"}),"\n",(0,r.jsxs)(n.p,{children:["Defined in ",(0,r.jsx)(n.strong,{children:"services/profile-service.ts"})]}),"\n",(0,r.jsx)(n.p,{children:"Updates user profile fields like display name, interests, and skills."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"userId: string"})," - Supabase auth user ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"updates: Partial<UserProfile>"})," - Fields to update"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," ",(0,r.jsx)(n.code,{children:"Promise<{ success: boolean; error?: string }>"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Update status"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"team-service",children:"Team Service"}),"\n",(0,r.jsx)(n.h3,{id:"createteam-function",children:"createTeam Function"}),"\n",(0,r.jsxs)(n.p,{children:["Defined in ",(0,r.jsx)(n.strong,{children:"services/team-service.ts:176"})]}),"\n",(0,r.jsx)(n.p,{children:"Creates a new team with authenticated user as admin, linking it to the current Git project."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"lobbyName: string"})," - Display name for the team lobby"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," ",(0,r.jsx)(n.code,{children:"Promise<{ team?: Team; joinCode?: string; error?: string }>"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"team"}),": The created Team object with all metadata"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"joinCode"}),": The generated 6-character join code for inviting members"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"}),": Error message if creation failed"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Pre-conditions:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"User must be authenticated via Supabase"}),"\n",(0,r.jsx)(n.li,{children:"A Git repository with remote origin must be initialized in the workspace"}),"\n",(0,r.jsx)(n.li,{children:"User must have permissions to create teams in the database"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Post-conditions:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Team is created in Supabase ",(0,r.jsx)(n.code,{children:"teams"})," table"]}),"\n",(0,r.jsxs)(n.li,{children:["User is automatically added to ",(0,r.jsx)(n.code,{children:"team_membership"})," table as admin"]}),"\n",(0,r.jsx)(n.li,{children:"Project information (Git URL, hash, name) is stored with the team"}),"\n",(0,r.jsx)(n.li,{children:"If GitHub repository, verification status is recorded"}),"\n",(0,r.jsx)(n.li,{children:"Unique 6-character join code is generated and returned"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Remarks:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"GitHub Verification:"})," If the remote URL is a GitHub repository, the function attempts silent verification by checking if user has stored GitHub access token and verifying user has push access to the repository"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Process:"})," Validates user authentication \u2192 Checks workspace is Git repository with remote \u2192 Attempts silent GitHub verification if applicable \u2192 Calls ",(0,r.jsx)(n.code,{children:"create_team"})," RPC to create team and add admin \u2192 Updates verification metadata if verified"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const result = await createTeam('Backend Development Squad');\nif (result.error) {\n  vscode.window.showErrorMessage(result.error);\n} else {\n  vscode.window.showInformationMessage(\n    `Team created! Share this code: ${result.joinCode}`\n  );\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"jointeam-function",children:"joinTeam Function"}),"\n",(0,r.jsxs)(n.p,{children:["Defined in ",(0,r.jsx)(n.strong,{children:"services/team-service.ts:340"})]}),"\n",(0,r.jsx)(n.p,{children:"Joins a team using a 6-character join code with strict project validation."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"joinCode: string"})," - The 6-character team join code (case-insensitive)"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," ",(0,r.jsx)(n.code,{children:"Promise<{ team?: Team; error?: string; alreadyMember?: boolean }>"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"team"}),": The Team object the user joined"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"alreadyMember"}),": Boolean indicating if user was already a member"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"}),": Error message if join failed"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Pre-conditions:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"User must be authenticated"}),"\n",(0,r.jsx)(n.li,{children:"User must have the team's Git repository cloned locally"}),"\n",(0,r.jsx)(n.li,{children:"Current workspace must match the team's project (validated by Git remote URL and project hash)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Post-conditions:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["User is added to ",(0,r.jsx)(n.code,{children:"team_membership"})," table with 'member' role"]}),"\n",(0,r.jsx)(n.li,{children:"Team activity event is logged to track the join action"}),"\n",(0,r.jsx)(n.li,{children:"User can now access team features and see team activity"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Remarks:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Project Validation:"})," The function performs strict validation to ensure team members work on the same codebase by comparing Git remote URLs (must match) and verifying project identifier hash (must match)"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const result = await joinTeam('ABC123');\nif (result.error) {\n  vscode.window.showErrorMessage(result.error);\n} else if (result.alreadyMember) {\n  vscode.window.showInformationMessage('You are already a member of this team');\n} else {\n  vscode.window.showInformationMessage(`Joined team: ${result.team.lobby_name}`);\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"getuserteams-function",children:"getUserTeams Function"}),"\n",(0,r.jsxs)(n.p,{children:["Defined in ",(0,r.jsx)(n.strong,{children:"services/team-service.ts:471"})]}),"\n",(0,r.jsx)(n.p,{children:"Gets all teams the current user is a member of."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," ",(0,r.jsx)(n.code,{children:"Promise<{ teams?: TeamWithMembership[]; error?: string }>"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"teams"}),": Array of TeamWithMembership objects (team data + user's role)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"}),": Error message if retrieval failed"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Pre-conditions:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"User must be authenticated with valid Supabase session"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Post-conditions:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Returns array of teams with user's membership role included"}),"\n",(0,r.jsx)(n.li,{children:"Empty array returned if user is not a member of any teams"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const result = await getUserTeams();\nif (result.error) {\n  vscode.window.showErrorMessage(result.error);\n} else {\n  result.teams.forEach(team => {\n    console.log(`${team.lobby_name} - Role: ${team.role}`);\n  });\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"getteammembers-function",children:"getTeamMembers Function"}),"\n",(0,r.jsxs)(n.p,{children:["Defined in ",(0,r.jsx)(n.strong,{children:"services/team-service.ts:928"})]}),"\n",(0,r.jsx)(n.p,{children:"Gets all members of a team with their profile information."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"teamId: string"})," - Unique team identifier (UUID)"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," ",(0,r.jsx)(n.code,{children:"Promise<{ members?: TeamMember[]; error?: string }>"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"members"}),": Array of TeamMember objects with profile data"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"}),": Error message if retrieval failed"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Pre-conditions:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"User must be authenticated"}),"\n",(0,r.jsx)(n.li,{children:"User must be a member of the team (enforced by security check)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Post-conditions:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Returns list of all team members with profile data"}),"\n",(0,r.jsx)(n.li,{children:"Members are sorted by role (admins first) then by join date"}),"\n",(0,r.jsx)(n.li,{children:"Skills array combines interests and custom_skills from user_profiles"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Remarks:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Data Sources:"})," Primary - RPC function ",(0,r.jsx)(n.code,{children:"get_team_members_with_users"})," (accesses auth.users); Fallback - Direct queries to team_membership and user_profiles tables"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"deleteteam-function",children:"deleteTeam Function"}),"\n",(0,r.jsxs)(n.p,{children:["Defined in ",(0,r.jsx)(n.strong,{children:"services/team-service.ts:746"})]}),"\n",(0,r.jsx)(n.p,{children:"Deletes a team (admin only). Removes memberships first, then deletes the team."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"teamId: string"})," - Unique team identifier (UUID)"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," ",(0,r.jsx)(n.code,{children:"Promise<{ success: boolean; error?: string }>"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"success"}),": Boolean indicating if deletion was successful"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"}),": Error message if deletion failed"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Pre-conditions:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"User must be authenticated"}),"\n",(0,r.jsx)(n.li,{children:"User must be team admin"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Post-conditions:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Team record deleted from database"}),"\n",(0,r.jsx)(n.li,{children:"All team memberships removed"}),"\n",(0,r.jsx)(n.li,{children:"Associated activity data cleaned up"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"leaveteam-function",children:"leaveTeam Function"}),"\n",(0,r.jsxs)(n.p,{children:["Defined in ",(0,r.jsx)(n.strong,{children:"services/team-service.ts:791"})]}),"\n",(0,r.jsx)(n.p,{children:"Leaves a team (member only): removes the current user's membership row for the team."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"teamId: string"})," - Unique team identifier (UUID)"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," ",(0,r.jsx)(n.code,{children:"Promise<{ success: boolean; error?: string }>"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"success"}),": Boolean indicating if leave was successful"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"}),": Error message if leave failed"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Pre-conditions:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"User must be authenticated"}),"\n",(0,r.jsx)(n.li,{children:"User must be team member (not admin)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Post-conditions:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"User's membership record removed"}),"\n",(0,r.jsx)(n.li,{children:"Participant status event logged for leave action"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Remarks:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Team admins cannot leave the team they administer. They must transfer admin role or delete the team."}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"project-detection-service",children:"Project Detection Service"}),"\n",(0,r.jsx)(n.h3,{id:"getcurrentprojectinfo-function",children:"getCurrentProjectInfo Function"}),"\n",(0,r.jsxs)(n.p,{children:["Defined in ",(0,r.jsx)(n.strong,{children:"services/project-detection-service.ts"})]}),"\n",(0,r.jsx)(n.p,{children:"Gets comprehensive information about the currently open workspace project."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," ",(0,r.jsx)(n.code,{children:"ProjectInfo | null"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Project information or null if no workspace open"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Remarks:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Process:"})," Gets active workspace folder path \u2192 Checks if directory is Git repository \u2192 Extracts Git remote origin URL \u2192 Generates unique project hash from path and remote"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"validatecurrentproject-function",children:"validateCurrentProject Function"}),"\n",(0,r.jsxs)(n.p,{children:["Defined in ",(0,r.jsx)(n.strong,{children:"services/project-detection-service.ts"})]}),"\n",(0,r.jsx)(n.p,{children:"Validates that current workspace matches expected project by comparing hash and remote URL."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"projectHash: string"})," - Expected project hash to validate against"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"remoteUrl?: string"})," - Optional expected Git remote URL"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," ",(0,r.jsx)(n.code,{children:"{ isMatch: boolean; reason?: string; currentProject?: ProjectInfo }"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Object with ",(0,r.jsx)(n.code,{children:"isMatch"})," boolean and validation reason"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Remarks:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use Cases:"})," Validating user can join team (project must match); Checking if user switched to different project; Ensuring team members work on same codebase"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"file-snapshot-service",children:"File Snapshot Service"}),"\n",(0,r.jsx)(n.h3,{id:"addfilesnapshot-function",children:"addFileSnapshot Function"}),"\n",(0,r.jsxs)(n.p,{children:["Defined in ",(0,r.jsx)(n.strong,{children:"services/file-snapshot-service.ts:104"})]}),"\n",(0,r.jsx)(n.p,{children:"Inserts a new file snapshot record into the Supabase database."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"input: FileSnapshotInput"})," - Object containing file path, content, and change description"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," ",(0,r.jsx)(n.code,{children:"Promise<{ success: boolean; id?: string; error?: string }>"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"success"}),": Boolean indicating if snapshot was created successfully"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"}),": UUID of the created snapshot record"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"}),": Error message if creation failed"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Pre-conditions:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"User must be authenticated with Supabase"}),"\n",(0,r.jsx)(n.li,{children:"An active team must be selected (or team_id provided in input)"}),"\n",(0,r.jsx)(n.li,{children:"Supabase client must be properly configured"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Post-conditions:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["New record inserted into ",(0,r.jsx)(n.code,{children:"file_snapshots"})," table"]}),"\n",(0,r.jsx)(n.li,{children:"Snapshot is associated with user_id and team_id"}),"\n",(0,r.jsx)(n.li,{children:"AI summarization may be triggered asynchronously (handled by edge function)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Remarks:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Automatic Field Resolution:"})," ",(0,r.jsx)(n.code,{children:"user_id"})," - Resolved from current auth context by matching email with auth.users; ",(0,r.jsx)(n.code,{children:"team_id"})," - Retrieved from global state (",(0,r.jsx)(n.code,{children:"collabAgent.currentTeam"}),"); ",(0,r.jsx)(n.code,{children:"id"})," - Auto-generated UUID if not provided; ",(0,r.jsx)(n.code,{children:"updated_at"})," - Set to current timestamp if not provided"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const result = await addFileSnapshot({\n  file_path: 'src/services/auth-service.ts',\n  snapshot: '...file content...',\n  changes: 'Added new signIn function with OAuth support'\n});\n\nif (result.success) {\n  console.log(`Snapshot created with ID: ${result.id}`);\n} else {\n  vscode.window.showErrorMessage(result.error);\n}\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"jira-service",children:"Jira Service"}),"\n",(0,r.jsx)(n.h3,{id:"connectjira-function",children:"connectJira Function"}),"\n",(0,r.jsxs)(n.p,{children:["Defined in ",(0,r.jsx)(n.strong,{children:"services/jira-service.ts"})]}),"\n",(0,r.jsx)(n.p,{children:"Establishes connection to JIRA workspace using API credentials."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"domain: string"})," - JIRA workspace domain"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"email: string"})," - JIRA account email"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"apiToken: string"})," - JIRA API token"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," ",(0,r.jsx)(n.code,{children:"Promise<{ success: boolean; error?: string }>"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Connection status"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"fetchjiraissues-function",children:"fetchJiraIssues Function"}),"\n",(0,r.jsxs)(n.p,{children:["Defined in ",(0,r.jsx)(n.strong,{children:"services/jira-service.ts"})]}),"\n",(0,r.jsx)(n.p,{children:"Retrieves issues from a JIRA project for team task tracking."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"projectKey: string"})," - JIRA project key"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," ",(0,r.jsx)(n.code,{children:"Promise<{ issues?: any[]; error?: string }>"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Array of JIRA issues or error"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"session-sync-service",children:"Session Sync Service"}),"\n",(0,r.jsx)(n.h3,{id:"startsessionsync-function",children:"startSessionSync Function"}),"\n",(0,r.jsxs)(n.p,{children:["Defined in ",(0,r.jsx)(n.strong,{children:"services/session-sync-service.ts"})]}),"\n",(0,r.jsx)(n.p,{children:"Begins real-time synchronization of team session activity."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"teamId: string"})," - Team identifier for session"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," ",(0,r.jsx)(n.code,{children:"Promise<{ success: boolean; error?: string }>"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Sync start status"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"stopsessionsync-function",children:"stopSessionSync Function"}),"\n",(0,r.jsxs)(n.p,{children:["Defined in ",(0,r.jsx)(n.strong,{children:"services/session-sync-service.ts"})]}),"\n",(0,r.jsx)(n.p,{children:"Stops active session synchronization and cleans up resources."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," ",(0,r.jsx)(n.code,{children:"Promise<void>"})]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);