"use strict";(self.webpackChunkcreate_project_docs=self.webpackChunkcreate_project_docs||[]).push([[1460],{28453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>c});var i=s(96540);const r={},t=i.createContext(r);function o(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(t.Provider,{value:n},e.children)}},82015:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"api-specification/design-api-intro","title":"Design Document - Part II API","description":"What should be in this section.","source":"@site/docs/api-specification/design-api-intro.md","sourceDirName":"api-specification","slug":"/api-specification/design-api-intro","permalink":"/project-collabagent01/docs/api-specification/design-api-intro","draft":false,"unlisted":false,"editUrl":"https://github.com/Capstone-Projects-2025-Fall/project-collabagent01/edit/main/documentation/docs/api-specification/design-api-intro.md","tags":[],"version":"current","lastUpdatedBy":"Alphin Shajan","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"description":"What should be in this section."},"sidebar":"docsSidebar","previous":{"title":"API Specification","permalink":"/project-collabagent01/docs/category/api-specification"},"next":{"title":"API 1 - Collab Agent","permalink":"/project-collabagent01/docs/api-specification/openapi-spec"}}');var r=s(74848),t=s(28453);const o={sidebar_position:1,description:"What should be in this section."},c="Design Document - Part II API",a={},l=[{value:"Authentication API",id:"authentication-api",level:2},{value:"signIn Function",id:"signin-function",level:3},{value:"signOut Function",id:"signout-function",level:3},{value:"User API",id:"user-api",level:2},{value:"getUserByID Function",id:"getuserbyid-function",level:3},{value:"Supabase Client API",id:"supabase-client-api",level:2},{value:"getSupabase Function",id:"getsupabase-function",level:3},{value:"getCurrentUser Function",id:"getcurrentuser-function",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"design-document---part-ii-api",children:"Design Document - Part II API"})}),"\n",(0,r.jsx)(n.h2,{id:"authentication-api",children:"Authentication API"}),"\n",(0,r.jsx)(n.h3,{id:"signin-function",children:"signIn Function"}),"\n",(0,r.jsx)(n.p,{children:"Defined in api/auth-api.ts:31"}),"\n",(0,r.jsx)(n.p,{children:"Signs in a user using their email and password credentials."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"email: string"})," - The user's email address"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"password: string"})," - The user's password"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," ",(0,r.jsx)(n.code,{children:"Promise<{ token?: string; error?: string }>"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"token"}),": Authentication token for the user session (on success)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"}),": Error message describing why sign-in failed"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"`const result = await signIn('user@example.com', 'password123');\nif (result.error) {\n  vscode.window.showErrorMessage(`Sign in failed: ${result.error}`);\n} else {\n  console.log(`Signed in successfully, token: ${result.token}`);\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"signout-function",children:"signOut Function"}),"\n",(0,r.jsx)(n.p,{children:"Defined in api/auth-api.ts:69"}),"\n",(0,r.jsx)(n.p,{children:"Signs out a user by invalidating their session on the backend."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"userID: string"})," - The user's unique ID."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," ",(0,r.jsx)(n.code,{children:"Promise<{ error?: string }>"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"An object indicating success or containing an error message."}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"user-api",children:"User API"}),"\n",(0,r.jsx)(n.h3,{id:"getuserbyid-function",children:"getUserByID Function"}),"\n",(0,r.jsx)(n.p,{children:"Defined in api/user-api.ts:10"}),"\n",(0,r.jsx)(n.p,{children:"Fetches detailed user information by their unique ID."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"userID: string"})," - The user's unique identifier."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," ",(0,r.jsx)(n.code,{children:"Promise<{ user?: User; error?: string }>"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"An object containing the user data or an error message."}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"supabase-client-api",children:"Supabase Client API"}),"\n",(0,r.jsx)(n.h3,{id:"getsupabase-function",children:"getSupabase Function"}),"\n",(0,r.jsxs)(n.p,{children:["Defined in ",(0,r.jsx)(n.strong,{children:"auth/supabaseClient.ts:44"})]}),"\n",(0,r.jsxs)(n.p,{children:["Returns a ",(0,r.jsx)(n.strong,{children:"singleton Supabase client"})," configured for the VS Code environment, handling session persistence and token refresh using VS Code's global state."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," ",(0,r.jsx)(n.code,{children:"SupabaseClient"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["The configured ",(0,r.jsx)(n.strong,{children:"SupabaseClient"})," instance ready for database operations and authentication."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Throws:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Error"})," - If the Supabase URL or API key is not configured."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Remarks:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Singleton Pattern:"})," The client is created only once and reused across the extension."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Configuration:"})," Uses VS Code settings (",(0,r.jsx)(n.code,{children:"collabAgent.supabase.url"}),", ",(0,r.jsx)(n.code,{children:"collabAgent.supabase.anonKey"}),") or Environment Variables (",(0,r.jsx)(n.code,{children:"SUPABASE_URL"}),", ",(0,r.jsx)(n.code,{children:"SUPABASE_ANON_KEY"}),") for credentials."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Storage:"})," Auth tokens are stored in VS Code's ",(0,r.jsx)(n.strong,{children:"globalState"})," for persistence across sessions via a custom storage adapter."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Session Management:"})," Sessions persist (",(0,r.jsx)(n.code,{children:"persistSession: true"}),") and tokens are automatically refreshed (",(0,r.jsx)(n.code,{children:"autoRefreshToken: true"}),")."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const supabase = getSupabase();\nconst { data, error } = await supabase.from('teams').select('*');\n\nif (error) {\n  console.error('Failed to fetch teams:', error.message);\n} else {\n  console.log('Teams data:', data);\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"getcurrentuser-function",children:"getCurrentUser Function"}),"\n",(0,r.jsxs)(n.p,{children:["Defined in ",(0,r.jsx)(n.strong,{children:"auth/supabaseClient.ts:129"})]}),"\n",(0,r.jsxs)(n.p,{children:["Retrieves the currently authenticated user from Supabase using the active session. Returns ",(0,r.jsx)(n.code,{children:"null"})," if no user is signed in."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," ",(0,r.jsx)(n.code,{children:"Promise<null | User>"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["A Promise that resolves to the authenticated ",(0,r.jsx)(n.strong,{children:"User"})," object, or ",(0,r.jsx)(n.code,{children:"null"})," if no user is authenticated."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Remarks:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["This function ",(0,r.jsx)(n.strong,{children:"does not throw"})," an error on failure; it logs errors to the console."]}),"\n",(0,r.jsxs)(n.li,{children:["Check the return value for ",(0,r.jsx)(n.code,{children:"null"})," to determine the user's authentication status."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const user = await getCurrentUser();\n\nif (user) {\n  console.log(`Logged in as: ${user.email}`);\n  // Use user.id, user.user_metadata, etc.\n} else {\n  console.log('No user signed in');\n}\n"})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);